# Raspberry Pi Hide/Hash Wi-Fi password and Enable only 5 Ghz connection

This simple guide was designed to prepare multiple Raspberry Pi's for a 3D printing farm using Octoprint and SimplyPrint. `sudo raspi-config` works for basic configuration but it doesn't hide/hash the Wi-Fi network password. Instead, we have to modify the `/etc/wpa_supplicant/wpa_supplicant.config` file.

1. Install the base image of SimplyPrint with Octoprint using the Raspberry Pi Imager

2. Depending on your setup, remote into your pi terminal or use a keyboard with HDMI connection to a monitor.

3. Connect your pi up to the network using 'sudo raspi-config' if it isn't already connected. Then reboot.

## Secure / Hide / Hash the Wi-Fi Password

4. ssh into your pi.

```sh
# ssh user@your_raspberrypi_ip_address
# the example below will not work. You need your actual ip address and user account, preferably the admin account.
# the default is usually 'pi' and the default password is usually 'raspberry'
# ignore the dollar sign. This is just repesenting the terminal
$ ssh pi@0.0.0.0
```

5. Change into the `/etc/wpa_supplicant/` directory

```sh
$ cd /etc/wpa_suplicant/
```

6. Run `ls` to see a list of files. You should see the **wpa_supplicant.conf** file

7. Change the permissions on this file to `777`

```sh
sudo chmod -R 777 wpa_supplicant.config
```

8. Let's edit the file and remove current Wi-Fi configuration and limit to only the first three lines. If you are missing anything add it to your document. Here's an example before and after.

### Before

```bash
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=US

network={
    ssid=SAMPLE_SSID
    psk="SAMPLE_PASSWORD"
}
```

### After

```bash
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=US
```

9. Let's add the Wi-Fi again but this time make it encrypted/hidden/hashed.

10. In your terminal type following, but replace SSID with your network and the PASSWORD with your networks password.

```sh
wpa_passhrase SSID PASSWORD >> wpa_supplicant.config
```

> This command will generated a hashed version of your password and network. The double arrows will write the data generated by the command to the file. Which is why we made the file editable.

11. Run the command

```sh
cat wpa_supplicant.config
```

12. You should see an output like the exmaple below:

```sh
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=US

network={
	ssid="SAMPLE_SSID"
	#psk="SAMPLE_PASS"
	psk=f38383f984848f0394949f04949489f95437f947474
}
```

13. Run the command `nano wpa_supplicant.conf` to edit the file

14. Using the directional keys, move up to the `#psk="SAMPLE_PASS"` line and remove it.

15. Now press `ctrl+x`. When prompted press the `y` key to confirm your changes.

16. Once again, run `cat wpa_supplicant.config` to see your output. You should no longer see the line `#psk="SAMPLE_PASS"`

17. Run `sudo reboot` to reboot the Raspberry Pi. We are doing this before configuring the pi to only use 5 ghz Wi-Fi.

18. After reboot, ssh back into the pi. If everthing worked, you should be able to connect. Then change back into the `/etc/wpa_supplicant` directory

19. Run the `cat wpa_supplicant.config` command again to confirm your information.

## Configure 5G Wi-Fi (only)

20. Now, lets make it so the Pi can only connect to 5G Wi-Fi.

21. Run the following command. You should get a list of 5G signals

```sh
sudo iw wlan0 scan | grep -A5 'freq: 5'
```

22. In the list, locate the `freq` values

23. Out of the terminal, open a text document and type the frequency values separated by a single space only. Make sure there is not a space between the equal sign = and the first frequency value.

```sh
# This is just a sample. Use the values listed in your results
freq_list=5240 5808 5101
```

24. Edit the `wpa_supplicant.config` file again. Just above the network add a couple lines of white space. Then paste in your frequenency list `freq_list=5240 5808 5101`.

```bash
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=US

freq_list=5240 5808 5101

network={
    ssid="SAMPLE_SSID"
    psk=f38383f984848f0394949f04949489f95437f947474
}
```

25. Save your changes by pressing `ctrl + x` and press `y` to confirm.

26. Run `cat wpa_supplicant.config` to make sure the content saved

27. Change the permissions of the file again, this time to `755`;

```sh
sudo chmod -R 755 wpa_supplicant.config
```

28. Reboot by running `sudo reboot`

29. When the pi reconnects to the network, check your network admin panel and make sure the pi is only connected to the 5G network.
